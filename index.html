<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>LEMEXI — вход в Telegram</title>
<meta name="theme-color" content="#229ED9">
<meta property="og:title" content="LEMEXI Creative Studio — Telegram">
<meta property="og:description" content="Нажмите, чтобы подать заявку на вступление">
<meta property="og:type" content="website">

<style>
  :root { --tg:#229ED9; --fg:#0f172a; --muted:#475569; --bd:#e2e8f0; }
  html,body{height:100%}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    margin:0; color:var(--fg); background:#fff;
    display:flex; align-items:center; justify-content:center; padding:20px;
  }
  .wrap{max-width:720px; width:100%}
  .card{
    border:1px solid var(--bd); border-radius:16px; padding:20px;
    box-shadow:0 6px 30px rgba(2,8,23,.05);
  }
  h1{font-size:22px;margin:0 0 6px}
  p{margin:8px 0;color:var(--muted);line-height:1.45}
  .btn{
    display:inline-block; padding:14px 18px; border-radius:12px;
    text-decoration:none; font-weight:600; margin:8px 8px 0 0; border:1px solid var(--bd);
  }
  .btn-primary{ background:var(--tg); color:#fff; border-color:var(--tg) }
  .btn-ghost{ color:var(--fg); background:#fff }
  .hint{font-size:14px;color:#16a34a;margin-top:6px}
  .diag{font-size:12px;color:#94a3b8;margin-top:12px;word-break:break-all}
  ol{margin:10px 0 0 18px;padding:0}
</style>

<script>
(function () {
  // ======== ПАРАМЕТРЫ ========
  var INVITE = "UfY7u-enQmYxMGI0";                 // твой приватный код
  var TG_DEEP = "tg://join?invite=" + INVITE;      // приложение
  var TG_WEB  = "https://t.me/+" + INVITE;         // веб-фоллбек
  var INTENT  = "intent://join?invite=" + INVITE +
    "#Intent;scheme=tg;package=org.telegram.messenger;" +
    "S.browser_fallback_url=" + encodeURIComponent(TG_WEB) + ";end";

  // ======== ДЕТЕКТ ========
  var ua = navigator.userAgent || "";
  var isIOS = /iP(hone|od|ad)/i.test(ua);
  var isAndroid = /Android/i.test(ua);
  var isInApp = /(FBAN|FBAV|Instagram|Line|Twitter|TikTok|Pinterest|Snapchat)/i.test(ua);

  // ======== ФУНКЦИИ ========
  function openDeep(){ try{ location.replace(TG_DEEP); }catch(e){} }
  function openIntent(){ try{ location.replace(INTENT); }catch(e){} }
  function openWeb(){ try{ location.href = TG_WEB; }catch(e){} }

  function copyLink(){
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(TG_WEB).then(function(){
        var el = document.getElementById('copied');
        if (el) { el.textContent = "Ссылка скопирована — вставьте в Safari при необходимости."; el.className = "hint"; }
      }).catch(function(){});
    }
  }

  function run(){
    if (!isInApp) {
      // Внешние браузеры — автозапуск
      openDeep();
      if (isAndroid) setTimeout(openIntent, 600);
      setTimeout(openWeb, 1300);
      return;
    }
    // Встроенные webview соцсетей
    if (isAndroid) {
      setTimeout(openIntent, 200);
      setTimeout(openWeb, 1200);
    } else if (isIOS) {
      // iOS в TikTok/IG/FB: deeplink блокируют — готовим выход в Safari
      copyLink();
      setTimeout(function(){ try{ window.open(TG_WEB, "_blank", "noopener,noreferrer"); }catch(e){} }, 300);
    } else {
      setTimeout(openWeb, 300);
    }
  }

  document.addEventListener("visibilitychange", function(){
    if (!document.hidden && !isInApp) openDeep();
  });

  window._LEMEXI = { openDeep: openDeep, openWeb: openWeb, copy: copyLink };
  run();
})();
</script>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>LEMEXI Creative Studio</h1>
      <p>Сейчас откроется Telegram для подачи заявки на вступление. Если вы в приложении TikTok/Instagram на iPhone — нажмите <b>⋯ → Open in browser</b>, затем <b>JOIN</b>.</p>

      <a class="btn btn-primary" href="tg://join?invite=UfY7u-enQmYxMGI0" onclick="_LEMEXI.openDeep();return false;">Открыть в Telegram</a>
      <a class="btn btn-ghost"   href="https://t.me/+UfY7u-enQmYxMGI0" target="_blank" rel="noopener" onclick="_LEMEXI.openWeb();">Открыть через веб</a>
      <a class="btn btn-ghost"   href="#" onclick="_LEMEXI.copy();return false;">Скопировать ссылку</a>

      <p id="copied"></p>
      <div style="border:1px solid #e2e8f0;border-radius:12px;padding:14px;margin-top:10px">
        <p><b>Если внутри TikTok на iPhone не пускает:</b></p>
        <ol>
          <li>Нажмите <b>⋯</b> вверху справа.</li>
          <li>Выберите <b>Open in browser</b> (Открыть в браузере).</li>
          <li>Нажмите <b>JOIN</b> — заявка уйдёт на одобрение.</li>
        </ol>
        <p class="diag" id="ua"></p>
      </div>
    </div>
  </div>

<script>document.getElementById('ua').textContent = navigator.userAgent;</script>

<noscript><meta http-equiv="refresh" content="0; url=https://t.me/+UfY7u-enQmYxMGI0"></noscript>
</body>
</html>